# =============================================================================
# WORDPRESS FARM INFRASTRUCTURE - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and configure with your actual values
# This configuration is used by all infrastructure management and backup scripts

# =============================================================================
# PROJECT CONFIGURATION
# =============================================================================
DEPLOYMENT_PROJECT=wordpress-farm

# =============================================================================
# DIGITALOCEAN CONFIGURATION
# =============================================================================
# DigitalOcean API token (get from: https://cloud.digitalocean.com/account/api/tokens)
DO_API_TOKEN=your_digitalocean_api_token_here

# Region for all resources (nyc1, nyc3, sfo2, sfo3, ams3, sgp1, lon1, fra1, tor1, blr1)
DO_REGION=nyc3

# VPC Network CIDR
VPC_CIDR=10.10.0.0/16

# SSH key name for server access
DO_SSH_KEY_NAME=wordpress-farm-key

# DigitalOcean Spaces configuration
DO_SPACES_BUCKET=wordpress-farm-backups
DO_SPACES_REGION=nyc3

# =============================================================================
# NODE CONFIGURATION
# =============================================================================
# Manager nodes (Docker Swarm managers)
MANAGER_NODE_COUNT=3
MANAGER_NODE_SIZE=s-2vcpu-4gb

# Worker nodes (WordPress application)
WORKER_NODE_COUNT=3
WORKER_NODE_SIZE=s-4vcpu-8gb

# Cache nodes (Redis, Varnish)
CACHE_NODE_COUNT=2
CACHE_NODE_SIZE=s-2vcpu-4gb

# Database nodes (MySQL/ProxySQL)
DB_NODE_COUNT=3
DB_NODE_SIZE=s-4vcpu-8gb

# Storage nodes (GlusterFS/NFS)
STORAGE_NODE_COUNT=2
STORAGE_NODE_SIZE=s-2vcpu-4gb
STORAGE_VOLUME_SIZE=500

# Monitoring nodes (Prometheus, Grafana, etc.)
MONITOR_NODE_COUNT=1
MONITOR_NODE_SIZE=s-2vcpu-4gb

# =============================================================================
# DOCKER SWARM CONFIGURATION
# =============================================================================
# These are auto-populated by the init-swarm command
SWARM_MANAGER_TOKEN=
SWARM_WORKER_TOKEN=

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# MySQL/ProxySQL connection
MYSQL_HOST=proxysql
MYSQL_PORT=6033
MYSQL_ROOT_PASSWORD=your_secure_mysql_root_password_here

# =============================================================================
# S3/SPACES BACKUP CONFIGURATION
# =============================================================================
# S3-compatible endpoint (DigitalOcean Spaces)
S3_ENDPOINT=https://nyc3.digitaloceanspaces.com
S3_BUCKET=wordpress-farm-backups
S3_ACCESS_KEY=your_spaces_access_key_here
S3_SECRET_KEY=your_spaces_secret_key_here

# Backup prefixes
S3_PREFIX=database-backups
# S3_PREFIX=wordpress-files  # Used by wordpress backup script

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
# Compression method (gzip, bzip2, xz, none)
COMPRESSION=gzip

# Encryption settings
ENCRYPTION_ENABLED=true
GPG_RECIPIENT=backup@yourdomain.com

# WordPress data path
WORDPRESS_DATA_PATH=/wordpress-data

# Parallel backup jobs
PARALLEL_JOBS=4

# =============================================================================
# BACKUP RETENTION CONFIGURATION
# =============================================================================
# Days to keep all backups
KEEP_ALL_DAYS=14

# Weekly backup retention (days 15-180, Sunday only)
KEEP_WEEKLY_START_DAY=15
KEEP_WEEKLY_END_DAY=180

# Monthly backup retention (days 181-365, 1st of month only)
KEEP_MONTHLY_START_DAY=181
KEEP_MONTHLY_END_DAY=365

# Maximum age for any backup (days)
MAX_AGE_DAYS=365

# Dry run mode for cleanup (true/false)
DRY_RUN=false

# Verbose logging (true/false)
VERBOSE=false

# =============================================================================
# BACKUP MONITORING CONFIGURATION
# =============================================================================
# Maximum age for backups to be considered healthy (hours)
BACKUP_MAX_AGE_HOURS=26

# Minimum backup size to be considered valid (MB)
BACKUP_MIN_SIZE_MB=10

# Monitoring check interval (seconds)
CHECK_INTERVAL=300

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================
# Slack/Discord/Mattermost webhook URL for notifications
NOTIFICATION_URL=

# Alertmanager URL
ALERTMANAGER_URL=http://alertmanager:9093

# Prometheus Pushgateway URL
PUSHGATEWAY_URL=http://prometheus-pushgateway:9091

# =============================================================================
# SITE SELECTOR API CONFIGURATION (Contractor Portal)
# =============================================================================
# Flask secret key for sessions
SESSION_SECRET=change_me_to_a_random_secret_key_in_production

# Management tool URLs
FILEBROWSER_URL=https://files.yourdomain.com
ADMINER_URL=https://db.yourdomain.com

# Authentik SSO configuration
AUTHENTIK_URL=https://authentik.yourdomain.com

# =============================================================================
# CLOUDFLARE CONFIGURATION
# =============================================================================
# Cloudflare API token (works across all zones in your account)
CF_API_TOKEN=your_cloudflare_api_token_here

# Path to Cloudflare zones configuration file (YAML)
CF_ZONES_CONFIG=./cloudflare-zones.yml

# =============================================================================
# SCRIPT BEHAVIOR FLAGS
# =============================================================================
# Dry run mode (show what would be done without making changes)
DRY_RUN=false

# Force mode (skip confirmation prompts)
FORCE=false

# Verbose output
VERBOSE=false
