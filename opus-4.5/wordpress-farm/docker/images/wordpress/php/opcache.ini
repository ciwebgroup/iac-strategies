; =============================================================================
; OPCACHE CONFIGURATION - WordPress Farm Production
; =============================================================================

[opcache]
; Enable OPcache
opcache.enable=1
opcache.enable_cli=0

; Memory consumption
opcache.memory_consumption=256
opcache.interned_strings_buffer=32
opcache.max_accelerated_files=50000

; Validation
; In production, disable file timestamp validation for performance
; Use a deployment script to reset opcache on deploys
opcache.validate_timestamps=0
opcache.revalidate_freq=0
opcache.revalidate_path=0

; Performance
opcache.fast_shutdown=1
opcache.enable_file_override=1
opcache.max_wasted_percentage=10
opcache.consistency_checks=0

; JIT (PHP 8.0+)
; tracing JIT provides best performance for WordPress
opcache.jit=tracing
opcache.jit_buffer_size=128M

; Blacklist - files to not cache
; opcache.blacklist_filename=/etc/php/opcache-blacklist.txt

; Error logging
opcache.error_log=/var/log/php-fpm/opcache.log
opcache.log_verbosity_level=1

; Optimization level (production)
; Level 0x7FFFBFFF = All optimizations enabled
opcache.optimization_level=0x7FFFBFFF

; Save comments (required for some plugins/frameworks)
opcache.save_comments=1

; Lock file for shared memory
opcache.lockfile_path=/tmp

; Restrict access
opcache.restrict_api=


