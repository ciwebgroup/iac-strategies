---
# Variables specific to Monitoring tier nodes (Prometheus, Grafana, Loki)

node_role: worker
node_type: monitor
tier: observability

# Node labels for service placement
node_labels:
  ops: "true"
  tier: observability
  role: worker

# Prometheus configuration
prometheus_retention_days: 30
prometheus_storage_path: "/var/lib/prometheus"

# Grafana configuration
grafana_port: 3000
grafana_data_path: "/var/lib/grafana"

# Loki configuration
loki_port: 3100
loki_retention_days: 14

# Tempo configuration (distributed tracing)
tempo_port: 3200

# Alertmanager configuration
alertmanager_port: 9093
alertmanager_cluster_port: 9094

# System optimizations for monitoring workload
sysctl_config:
  # Memory for time-series data
  vm.max_map_count: 262144
  # File descriptors for many connections
  fs.file-max: 131072
  # Network buffers
  net.core.rmem_max: 16777216
  net.core.wmem_max: 16777216

# Placement constraints
placement_constraints:
  - "node.labels.ops == true"

# Disk space management
monitoring_disk_warning_threshold: 80
monitoring_disk_critical_threshold: 90
